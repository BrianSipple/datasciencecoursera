?tapply
balt_city_emissions_years_types = tapply(balt_city_emissions, c(balt_city_emissions_years, balt_city_emissions_types), "sum")
balt_city_emissions_years_types = tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum")
View(balt_city_emissions_years_types)
View(balt_city_emissions_years_types)
View(balt_city_emissions_years_types)
?data.frame
balt_city_emisssions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum"))
View(balt_city_emisssions_year_types_df)
View(balt_city_emisssions_year_types_df)
balt_city_emisssions_year_types_df = as.matrix(tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum"))
View(balt_city_emisssions_year_types_df)
data.frame
balt_city_emisssions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum"))
View(balt_city_emisssions_year_types_df)
names(balt_city_emisssions_year_types_df) = c("nonroad", "nonpoint", "onroad", "point")
View(df)
View(balt_city_emisssions_year_types_df)
row.names(balt_city_emisssions_year_types_df)
index(balt_city_emisssions_year_types_df)
?data.frame
balt_city_emisssions_year_types_df = data.frame(year = row.names(balt_city_emisssions_year_types_df),
point = balt_city_emisssions_year_types_df$point,
nonpoint = balt_city_emisssions_year_types_df$nonpoint,
onroad = balt_city_emisssions_year_types_df$onroad,
nonroad = balt_city_emisssions_year_types_df$nonroad)
ggplot(data=balt_city_emissions_years_types, aes(x=year, y=point)) +
geom_line()
ggplot(data=balt_city_emissions_years_types_df, aes(x=year, y=point)) +
geom_line()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line()
balt_city_emisssions_year_types_df = data.frame(year = row.names(balt_city_emisssions_year_types_df),
point = balt_city_emisssions_year_types_df$point,
nonpoint = balt_city_emisssions_year_types_df$nonpoint,
onroad = balt_city_emisssions_year_types_df$onroad,
nonroad = balt_city_emisssions_year_types_df$nonroad)
remove(balt_city_emisssions_year_types_df)
balt_city_emissions_year_types_df = data.frame(year = row.names(balt_city_emisssions_year_types_df),
point = balt_city_emisssions_year_types_df$point,
nonpoint = balt_city_emisssions_year_types_df$nonpoint,
onroad = balt_city_emisssions_year_types_df$onroad,
nonroad = balt_city_emisssions_year_types_df$nonroad)
balt_city_emissions_year_types_df = data.frame(year = row.names(balt_city_emissions_year_types_df),
point = balt_city_emissions_year_types_df$point,
nonpoint = balt_city_emissions_year_types_df$nonpoint,
onroad = balt_city_emissions_year_types_df$onroad,
nonroad = balt_city_emissions_year_types_df$nonroad)
balt_city_emissions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum"))
names(balt_city_emisssions_year_types_df) = c("nonroad", "nonpoint", "onroad", "point")
names(balt_city_emissions_year_types_df) = c("nonroad", "nonpoint", "onroad", "point")
balt_city_emissions_year_types_df = data.frame(year = row.names(balt_city_emissions_year_types_df),
point = balt_city_emissions_year_types_df$point,
nonpoint = balt_city_emissions_year_types_df$nonpoint,
onroad = balt_city_emissions_year_types_df$onroad,
nonroad = balt_city_emissions_year_types_df$nonroad)
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line()
View(balt_city_emissions_year_types_df)
View(balt_city_emissions_year_types_df)
?ggplot
ggplot2(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=3)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=group)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point, group=year)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point, group=year)) +
geom_line()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(group=point)
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point, group=point)) +
geom_line()
?group
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(aes(linetype = variable))
library(reshape2)
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(aes(linetype = variable))
library(plyr)
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(aes(linetype = variable))
?linetype
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(aes(linetype = 2))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
scale_x_discrete() +
geom_line(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
scale_y_discrete() +
geom_line(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
scale_y_discrete(name="") +
geom_line(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
scale_y_discrete(name="") +
scale_linetype_discrete(name="") +
geom_line(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
scale_y_discrete(name="") +
scale_linetype_discrete(name="") +
geom_segment(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_segment(aes(linetype = 1))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_segment()
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_point() +
geom_line()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point, group=NULL)) +
geom_point() +
geom_line()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point, linetype=1)) +
geom_point()
balt_city_emissions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_types, balt_city_emissions_years), "sum"))
View(balt_city_emissions_year_types_df)
names(balt_city_emissions_year_types_df) = c("nonroad", "nonpoint", "onroad", "point")
balt_city_emissions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_types, balt_city_emissions_years), "sum"))
names(balt_city_emissions_year_types_df) = c(1999, 2002, 2005, 2008)
View(balt_city_emissions_year_types_df)
ggplot(data=balt_city_emissions_year_types_df, aes(x=c(1999, 2002, 2005, 2008), y=balt_city_emissions_year_types_df[1,], linetype=1)) +
geom_point()
ggplot(data=balt_city_emissions_year_types_df, aes(x=c(1999, 2002, 2005, 2008), y=balt_city_emissions_year_types_df[1,])) +
geom_point()
balt_city_emissions_year_types_df.pont
balt_city_emissions_year_types_df.point
balt_city_emissions_year_types_df = data.frame(tapply(balt_city_emissions, balt_city_emissions_types, "sum"))
View(balt_city_emissions_year_types_df)
balt_city_emissions_years
balt_city_emissions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum"))
names(balt_city_emissions_year_types_df) = c("nonroad", "nonpoint", "onroad", "point")
balt_city_emissions_year_types_df = data.frame(year = row.names(balt_city_emissions_year_types_df),
point = balt_city_emissions_year_types_df$point,
nonpoint = balt_city_emissions_year_types_df$nonpoint,
onroad = balt_city_emissions_year_types_df$onroad,
nonroad = balt_city_emissions_year_types_df$nonroad)
geom_bar()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point, linetype=1)) +
geom_bar()
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_bar()
install.packages("grid")
library(gridview)
install.packages(gridBase)
install.packages("gridBase")
library(gridBase)
g2 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=nonpoint)) +
geom_bar()
library(ggplot2)
library(ggplot)
install.packages("ggplot2")
library(ggplot2)
library(gridBase)
g1 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_bar()
g2 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=nonpoint)) +
geom_bar()
g3 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=onroad)) +
geom_bar()
g4 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=nonroad)) +
geom_bar()
?grid
plot.figure
?figure
intall.packages(gridExtra)
install.packages("gridExtra")
library(gridExtra)
grid.arrange(g1, g2, g3, g4, ncol=2)
geom_line(stat="summary")
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(stat="summary")
geom_line(stat="summary", aes(linetype=2))
ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_line(stat="summary", aes(linetype=2))
unique(SCC$Data.Category)
unique(SCC$Short.Name)
?grep
grep("combustion", SCC$Short.Name)
grep("combustion", SCC$Short.Name)[1]
SCC$Short.Name[56]
SCC$Short.Name[56,]
SCC$Short.Name[[56]]
SCC$Short.Name[[145]]
grep("Ext Comb", SCC$Short.Name)
View(SCC)
grep("*Ext Comb+[Cc]oal*", SCC$Short.Name)
?grep
grep("*[Ext Comb][*]+[Cc]oal*", SCC$Short.Name)
grep("*[Ext Comb]", SCC$Short.Name)
grep("*[Ext Comb]*[Cc]oal*", SCC$Short.Name)
ext_comb_index = grep("*[Ext Comb]*[Cc]oal*", SCC$Short.Name)
SCC$SCC[ext_comb_index]
unique(SCC$SCC[ext_comb_index])
SCC$SCC[ext_comb_index]
unique(SCC$SCC[ext_comb_index])
scc_codes = unique(SCC$SCC[ext_comb_index])
length(SCC$SCC)
length(scc_codes)
remove(scc_codes)
scc_coal_codes = unique(SCC$SCC[ext_comb_index])
coal_comb_emissions = NEA$Emissions[scc_coal_codes]
coal_comb_emissions = NEI$Emissions[scc_coal_codes]
coal_comb_years = NEI$year[scc_coal_codes]
coal_comb_year_sums = tapply(coal_comb_emissions, coal_comb_years, "sum")
coal_comb_year_groups = unique(coal_comb_years)
coal_comb_year_sums_df = data.frame(Emissions = coal_comb_year_sums, Year = coal_comb_year_groups)
coal_comb_years = NEI$year[scc_coal_codes]  # get the corresponding years for our values
coal_comb_years
scc_coal_codes
NEI$Emissions[scc_coal_codes]
NEI$SCC == scc_coal_codes
as.factor(NEI$SCC) == scc_coal_codes
scc_coal_codes
NEI$SCC
NEI$SCC = as.factor(NEI$SCC)
NEI$SCC
NEI$SCC == scc_coal_codes
NEI$SCC[scc_coal_codes]
nei_scc_index = NEI$SCC[scc_coal_codes]
NEI$SCC[nei_scc_index]
NEI[NEI$SCC[nei_scc_index],]
scc_coal_codes = SCC$SCC[ext_comb_index]
nei_scc_index = NEI$SCC[scc_coal_codes]
NEI$SCC[nei_scc_index]
NEI[NEI$SCC[nei_scc_index],]
nei_scc_index = NEI$SCC[scc_coal_codes]
NEI[NEI$SCC[nei_scc_index],]
target_frame = NEI[NEI$SCC[nei_scc_index],]  # Narrow the frame down to the values we're looking for
names(target_frame)
target_frame$year
coal_comb_emissions = target_frame$Emissions  # get all emission values pertaining to the codes
coal_comb_years = target_frame$year  # get the corresponding years for our values
coal_comb_year_sums = tapply(coal_comb_emissions, coal_comb_years, "sum")
coal_comb_year_groups = unique(coal_comb_years)
coal_comb_year_sums_df = data.frame(Emissions = coal_comb_year_sums, Year = coal_comb_year_groups)
SCC[SCC$SCC[ext_comb_index],]
SCC[SCC$SCC[ext_comb_index],]$SCC
scc_coal_codes = SCC[SCC$SCC[ext_comb_index],]$SCC
NEI$SCC == scc_coal_codes
str(NEI)
scc_coal_codes
levels(scc_coal_codes)
scc_caol_codes = levels(scc_coal_codes)
scc_coal_codes = levels(scc_coal_codes)
remove(scc_caol_codes)
scc_coal_codes = as.factor(levels(scc_coal_codes))
scc_coal_codes
scc_coal_codes = levels(scc_coal_codes)
scc_coal_codes = as.factor(scc_coal_codes)
scc_coal_codes = levels(scc_coal_codes)
scc_coal_codes = levels(scc_coal_codes)
scc_coal_codes = SCC[SCC$SCC[ext_comb_index],]$SCC
scc_coal_codes = levels(scc_coal_codes)
scc_caol_codes = as.factor(scc_coal_codes)
scc_coal_codes = SCC[SCC$SCC[ext_comb_index],]$SCC
scc_coal_codes = levels(scc_coal_codes)
remove(scc_caol_codes)
NEI$SCC = as.character(NEI$SCC)
NEI$SCC[scc_coal_codes]
NEI$SCC == scc_coal_codes
View(NEI)
View(NEI)
View(NEI)
str(NEI)
list(NEI$SCC) == list(scc_coal_codes)
scc_coal_codes = as.character(scc_coal_codes)
NEI$SCC == scc_coal_codes
NEI$SCC[scc_coal_codes]
NEI$SCC = as.factor(NEI$SCC)
ext_comb_index = grep("*[Ext Comb]*[Cc]oal*", SCC$Short.Name)
scc_coal_codes = SCC[SCC$SCC[ext_comb_index],]$SCC
NEI$SCC == scc_coal_codes
NEI$SCC[scc_coal_codes]
NEI[NEI$SCC[scc_coal_codes],]
NEI$SCC[scc_coal_codes]
NEI$SCC[scc_coal_codes] == NEI$SCC
NEI[NEI$SCC[scc_coal_codes] == NEI$SCC],]
NEI[NEI$SCC[scc_coal_codes] == NEI$SCC,]
tail(NEI[NEI$SCC[scc_coal_codes] == NEI$SCC,], 20)
target_frame = NEI[NEI$SCC[scc_coal_codes] == NEI$SCC,]
target_frame$year
coal_comb_year_sums = tapply(target_frame$Emissions, target_frame$years, "sum")
coal_comb_year_sums = tapply(target_frame$Emissions, target_frame$year, "sum")
coal_comb_year_groups = unique(target_frame$year)
coal_comb_year_sums_df = data.frame(Emissions = coal_comb_year_sums, Year = coal_comb_year_groups)
View(coal_comb_year_sums_df)
View(coal_comb_year_sums_df)
barplot(data = coal_comb_year_sums_df, x = year, y = Emissions)
barplot(coal_comb_year_sums_dfyear, coal_comb_year_sums_df$Emissions)
barplot(coal_comb_year_sums_df$year, coal_comb_year_sums_df$Emissions)
?barplot
barplot(coal_comb_year_sums_df$Year, coal_comb_year_sums_df$Emissions)
barplot(coal_comb_year_sums_df$Emissions, coal_comb_year_sums_df$Year)
title("US Emissions from Coal Cumbustion-Related sources")
barplot(coal_comb_year_sums_df$Emissions, coal_comb_year_sums_df$Year) +
title("US Emissions from Coal Cumbustion-Related sources") +
xlab("Year") +
ylab("Emissions (tons)")
?plot
?barplot
barplot(coal_comb_year_sums_df$Emissions, coal_comb_year_sums_df$Year,
main = "US Emissions from Coal Cumbustion-Related sources",
xlab = "Year",
ylab = "Emissions (tons)"
)
balt_city_index = NEI$fips == "24510"
NEI[NEI$fips[balt_city_index],]
exit
quit
View(SCC)
View(SCC)
View(NEI)
SCC$Data.Category == "Nonraod"
SCC$Data.Category == "Nonroad"
SCC$Data.Category == "nonroad"
tail(SCC$Data.Category)
SCC$Data.Category == "Nonroad"
length(SCC$Data.Category == "Nonroad")
sum(SCC$Data.Category == "Nonroad")
row.names(SCC$Data.Category == "Nonroad")
SCC[SCC$Data.Category == "Nonroad",]
SCC[SCC$Data.Category == "Nonroad",]
?group
target_df = NEI[NEI$fips[balt_city_index] == NEI$fips,]
View(target_df)
View(target_df)
View(target_df)
target_df[target_df$type == "ON-ROAD",]
target_df = target_df[target_df$type == "ON-ROAD",]
balt_city_motor_emissions_grouped = tapply(target_df$Emissions, target_df$type, "sum")
year_bins = unique(target_df$year)
barplot(balt_city_motor_emissions_grouped, year_bins)
target_df = target_df[target_df$type == "ON-ROAD",]
View(target_df)
balt_city_motor_emissions_grouped = tapply(target_df$Emissions, target_df$type, "sum")
balt_city_motor_emissions_grouped = tapply(target_df$Emissions, target_df$year, "sum")
year_bins = unique(target_df$year)
balt_city_motor_emissions_df = data.frame(Emissions = balt_city_motor_emissions_grouped, Year = year_bins)
View(balt_city_motor_emissions_df)
barplot(balt_city_motor_emissions_df$Emissions, balt_city_motor_emissions_df$Year)
barplot(balt_city_motor_emissions_df$Emissions, balt_city_motor_emissions_df$Year,
main = "Baltimore City Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
la_county_index = NEI$fips == "06037"
target_df = NEI[NEI$fips[la_county_index] == NEI$fips,]
target_df = target_df[target_df$type == "ON-ROAD",]
la_county_motor_emissions_grouped = tapply(target_df$Emissions, target_df$year, "sum")
year_bins = unique(target_df$year)
la_county_motor_emissions_df = data.frame(Emissions = balt_city_motor_emissions_grouped, Year = year_bins)
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
""
)
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Baltimore City Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
la_county_motor_emissions_df = data.frame(Emissions = la_county_motor_emissions_grouped, Year = year_bins)
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
library(gridExtra)
b1 <- barplot(balt_city_motor_emissions_df$Emissions, balt_city_motor_emissions_df$Year,
main = "Baltimore City Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
b2 <- barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
grid.arrange(b1, b2, ncol=2)
View(`b1`)
View(`b2`)
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
?mfrow
?par
par(mfrow(c(1, 2)))
par(mfrow = c(1, 2))
barplot(balt_city_motor_emissions_df$Emissions, balt_city_motor_emissions_df$Year,
main = "Baltimore City Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
?title
?cex
title(cex=1)
title(cex=.5)
+ title(cex=.5)
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
+ title(cex=.5)
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
+ title(cex=.2)
barplot(balt_city_motor_emissions_df$Emissions, balt_city_motor_emissions_df$Year,
main = "Baltimore City Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
barplot(la_county_motor_emissions_df$Emissions, la_county_motor_emissions_df$Year,
main = "Los Angeles County Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
summary(la_county_motor_emissions_df)
summary(balt_city_motor_emissions_df)
getwd()
library(ggplot2)
total_emissions_per_year = tapply(NEI$Emissions, NEI$year, "sum")
years = unique(NEI$year)
df = data.frame(emissions=total_emissions_per_year, years=years)
plot(years, total_emissions_per_year, type="l") +
title(xlab ="Years") +
title(ylab = "Total emissions per year (tons)")
?plot
df = data.frame(Emissions=total_emissions_per_year, Year=years)
plot(df$Year, df$Emissions, type="l",
xlab = "Year",
ylab = "Total Emissions per year (tons)")
par(mfrow=c(1, 1))
total_emissions_per_year = tapply(NEI$Emissions, NEI$year, "sum")
years = unique(NEI$year)
df = data.frame(Emissions=total_emissions_per_year, Year=years)
plot(df$Year, df$Emissions, type="l",
xlab = "Year",
ylab = "Total Emissions per year (tons)")
balt_city_index = NEI$fips == "24510"
balt_city_emissions = NEI$Emissions[balt_city_index]
balt_city_emissions_years = NEI$year[balt_city_index]
balt_city_emissions_types = NEI$type[balt_city_index]
balt_city_emissions_by_year = tapply(balt_city_emissions, balt_city_emissions_year, "sum")
years = unique(balt_city_emissions_years)
# Combine grouped values into df and plot
balt_city_df = data.frame(emissions=balt_city_emissions_by_year, year=years)
plot(years, balt_city_emissions_by_year, data=balt_city_df, type="l")
plot(balt_city_df$Year, balt_city_df$Emissions, type="l")
balt_city_df = data.frame(Emissions=balt_city_emissions_by_year, Year=years)
plot(balt_city_df$Year, balt_city_df$Emissions, type="l")
plot(balt_city_df$Year, balt_city_df$Emissions,
type="l",
xlab = "Year",
ylab = "Total Emissions (tons)")
balt_city_index = NEI$fips == "24510"
balt_city_emissions = NEI$Emissions[balt_city_index]
balt_city_emissions_years = NEI$year[balt_city_index]
balt_city_emissions_types = NEI$type[balt_city_index]
# We have a nice set of vectors, but now we need to group by year -- FORE EACH TYPE -- summing emissions
unique(balt_city_emissions_types)
balt_city_emissions_year_types_df = data.frame(tapply(balt_city_emissions, list(balt_city_emissions_years, balt_city_emissions_types), "sum"))
names(balt_city_emissions_year_types_df) = c("nonroad", "nonpoint", "onroad", "point")
balt_city_emissions_year_types_df = data.frame(year = row.names(balt_city_emissions_year_types_df),
point = balt_city_emissions_year_types_df$point,
nonpoint = balt_city_emissions_year_types_df$nonpoint,
onroad = balt_city_emissions_year_types_df$onroad,
nonroad = balt_city_emissions_year_types_df$nonroad)
library(gridExtra)
g1 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=point)) +
geom_bar()
g2 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=nonpoint)) +
geom_bar()
g3 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=onroad)) +
geom_bar()
g4 = ggplot(data=balt_city_emissions_year_types_df, aes(x=year, y=nonroad)) +
geom_bar()
grid.arrange(g1, g2, g3, g4, ncol=2)
balt_city_index = NEI$fips == "24510"
target_df = NEI[NEI$fips[balt_city_index] == NEI$fips,]
target_df = target_df[target_df$type == "ON-ROAD",]
balt_city_motor_emissions_grouped = tapply(target_df$Emissions, target_df$year, "sum")
year_bins = unique(target_df$year)
balt_city_motor_emissions_df = data.frame(Emissions = balt_city_motor_emissions_grouped, Year = year_bins)
barplot(balt_city_motor_emissions_df$Emissions, balt_city_motor_emissions_df$Year,
main = "Baltimore City Motor Vehicle Emissions",
xlab = "Year",
ylab = "Emissions (tons)")
total_emissions_per_year = tapply(NEI$Emissions, NEI$year, "sum")
# Give our sums a matching years vector
years = unique(NEI$year)
# Combine sums and years into a data frame that we can expose to our plotting function
df = data.frame(Emissions=total_emissions_per_year, Year=years)
# A line plot will make for a perfect trend depiction
png("plot1.png")
plot(df$Year, df$Emissions, type="l",
xlab = "Year",
ylab = "Total PM2.5 Emissions per year (tons)")
dev.off()
